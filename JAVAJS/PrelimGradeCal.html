<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Prelim Grade Calculator - JavaScript Version</title>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì Prelim Grade Calculator</h1>
            <p>JavaScript Version - Compute Required Exam Score</p>
        </div>

        <div class="content">
            <div class="formula-info">
                <strong>üìê Grading Formula:</strong><br>
                ‚Ä¢ Prelim Grade = (70% √ó Prelim Exam) + (30% √ó Class Standing)<br>
                ‚Ä¢ Class Standing = (40% √ó Attendance) + (60% √ó Lab Work Average)<br>
                ‚Ä¢ Lab Work Average = (LW1 + LW2 + LW3) / 3
            </div>

            <div id="alertBox" class="alert error" style="display: none;"></div>

            <form id="gradeForm">
                <div class="form-group">
                    <label for="attendance">üìÖ Number of Attendances (0-100):</label>
                    <input 
                        type="number" 
                        id="attendance" 
                        min="0" 
                        max="100" 
                        step="1"
                        placeholder="Enter attendance count"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="labWork1">üìù Lab Work 1 Grade (0-100):</label>
                    <input 
                        type="number" 
                        id="labWork1" 
                        min="0" 
                        max="100" 
                        step="0.01"
                        placeholder="Enter Lab Work 1 grade"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="labWork2">üìù Lab Work 2 Grade (0-100):</label>
                    <input 
                        type="number" 
                        id="labWork2" 
                        min="0" 
                        max="100" 
                        step="0.01"
                        placeholder="Enter Lab Work 2 grade"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="labWork3">üìù Lab Work 3 Grade (0-100):</label>
                    <input 
                        type="number" 
                        id="labWork3" 
                        min="0" 
                        max="100" 
                        step="0.01"
                        placeholder="Enter Lab Work 3 grade"
                        required
                    >
                </div>

                <button type="submit" class="btn">üßÆ Calculate Required Scores</button>
                <button type="button" class="btn reset" id="resetBtn">‚Üª Reset Form</button>
            </form>

            <div id="results" class="results">
                <div class="section-title">üìä INPUT SUMMARY</div>
                <div class="result-item">
                    <span class="result-label">Attendance:</span>
                    <span class="result-value" id="displayAttendance"></span>
                </div>
                <div class="result-item">
                    <span class="result-label">Lab Work 1 Grade:</span>
                    <span class="result-value" id="displayLW1"></span>
                </div>
                <div class="result-item">
                    <span class="result-label">Lab Work 2 Grade:</span>
                    <span class="result-value" id="displayLW2"></span>
                </div>
                <div class="result-item">
                    <span class="result-label">Lab Work 3 Grade:</span>
                    <span class="result-value" id="displayLW3"></span>
                </div>

                <div class="section-title">üßÆ COMPUTED VALUES</div>
                <div class="result-item">
                    <span class="result-label">Lab Work Average:</span>
                    <span class="result-value" id="displayLabAvg"></span>
                </div>
                <div class="result-item">
                    <span class="result-label">Class Standing:</span>
                    <span class="result-value" id="displayClassStanding"></span>
                </div>

                <div class="section-title">üéØ REQUIRED PRELIM EXAM SCORES</div>
                <div class="result-item">
                    <span class="result-label">To Pass (75):</span>
                    <span class="result-value" id="displayPassScore"></span>
                </div>
                <div class="result-item">
                    <span class="result-label">For Excellent (100):</span>
                    <span class="result-value" id="displayExcellentScore"></span>
                </div>

                <div id="remarkBox"></div>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // CONSTANTS: Grading System Configuration
        // ========================================
        const PRELIM_EXAM_WEIGHT = 0.70;
        const CLASS_STANDING_WEIGHT = 0.30;
        const ATTENDANCE_WEIGHT = 0.40;
        const LABWORK_WEIGHT = 0.60;
        const PASSING_GRADE = 75.0;
        const EXCELLENT_GRADE = 100.0;

        // ========================================
        // FORMULAS: Grading Calculations
        // ========================================

        /**
         * Formula: Lab Work Average = (LW1 + LW2 + LW3) / 3
         */
        function computeLabWorkAverage(lw1, lw2, lw3) {
            return (lw1 + lw2 + lw3) / 3.0;
        }

        /**
         * Formula: Class Standing = (40% √ó Attendance) + (60% √ó Lab Work Average)
         */
        function computeClassStanding(attendance, labWorkAverage) {
            return (ATTENDANCE_WEIGHT * attendance) + (LABWORK_WEIGHT * labWorkAverage);
        }

        /**
         * Formula: Prelim Grade = (70% √ó Prelim Exam) + (30% √ó Class Standing)
         * Solve for Prelim Exam:
         * Prelim Exam = (Target Grade - (30% √ó Class Standing)) / 70%
         */
        function computeRequiredPrelimExam(targetGrade, classStanding) {
            return (targetGrade - (CLASS_STANDING_WEIGHT * classStanding)) / PRELIM_EXAM_WEIGHT;
        }

        // ========================================
        // VALIDATION: Input Validation
        // ========================================
        function validateInput(value, min, max, fieldName) {
            if (value === '' || isNaN(value)) {
                return `${fieldName} must be a valid number.`;
            }
            const num = parseFloat(value);
            if (num < min || num > max) {
                return `${fieldName} must be between ${min} and ${max}.`;
            }
            return null;
        }

        function showAlert(message) {
            const alertBox = document.getElementById('alertBox');
            alertBox.textContent = '‚ùå ' + message;
            alertBox.style.display = 'block';
            setTimeout(() => {
                alertBox.style.display = 'none';
            }, 5000);
        }

        // ========================================
        // DISPLAY: Show Results
        // ========================================
        function displayResults(data) {
            // Input Summary
            document.getElementById('displayAttendance').textContent = data.attendance;
            document.getElementById('displayLW1').textContent = data.lw1.toFixed(2);
            document.getElementById('displayLW2').textContent = data.lw2.toFixed(2);
            document.getElementById('displayLW3').textContent = data.lw3.toFixed(2);

            // Computed Values
            document.getElementById('displayLabAvg').textContent = data.labAverage.toFixed(2);
            document.getElementById('displayClassStanding').textContent = data.classStanding.toFixed(2);

            // Required Scores
            document.getElementById('displayPassScore').textContent = data.requiredPass.toFixed(2);
            document.getElementById('displayExcellentScore').textContent = data.requiredExcellent.toFixed(2);

            // Generate Remarks
            generateRemarks(data.requiredPass, data.requiredExcellent);

            // Show results section
            document.getElementById('results').style.display = 'block';

            // Scroll to results
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        // ========================================
        // REMARKS: Generate Evaluation Remarks
        // ========================================
        function generateRemarks(requiredPass, requiredExcellent) {
            const remarkBox = document.getElementById('remarkBox');
            let html = '<div class="section-title">üí¨ REMARKS</div>';

            // Passing Grade Remark
            if (requiredPass > 100) {
                html += `
                    <div class="remark-box danger">
                        <div class="remark-title">‚ùå Cannot Pass</div>
                        <div class="remark-text">
                            Unfortunately, it is mathematically impossible to pass the Prelim period 
                            with your current Class Standing. The required score of ${requiredPass.toFixed(2)} 
                            exceeds the maximum possible score of 100.
                        </div>
                    </div>
                `;
            } else if (requiredPass < 0) {
                html += `
                    <div class="remark-box success">
                        <div class="remark-title">‚úÖ Already Passing!</div>
                        <div class="remark-text">
                            Congratulations! You have already secured a passing grade based on your 
                            Class Standing alone. Even with a score of 0 on the Prelim Exam, you will pass!
                        </div>
                    </div>
                `;
            } else {
                html += `
                    <div class="remark-box">
                        <div class="remark-title">‚úÖ Passing is Achievable</div>
                        <div class="remark-text">
                            You need a Prelim Exam score of <strong>${requiredPass.toFixed(2)}</strong> 
                            to achieve a passing grade of 75. This score is attainable with proper preparation.
                        </div>
                    </div>
                `;
            }

            // Excellent Grade Remark
            if (requiredExcellent > 100) {
                html += `
                    <div class="remark-box warning">
                        <div class="remark-title">‚ö†Ô∏è Excellent Grade Not Possible</div>
                        <div class="remark-text">
                            Achieving an Excellent grade (100) is not mathematically possible with your 
                            current Class Standing. The required score of ${requiredExcellent.toFixed(2)} 
                            exceeds 100.
                        </div>
                    </div>
                `;
            } else if (requiredExcellent < 0) {
                html += `
                    <div class="remark-box success">
                        <div class="remark-title">üåü Already Excellent!</div>
                        <div class="remark-text">
                            Outstanding! You have already achieved an Excellent grade based on your 
                            Class Standing alone!
                        </div>
                    </div>
                `;
            } else {
                html += `
                    <div class="remark-box">
                        <div class="remark-title">üåü Excellent Grade is Achievable</div>
                        <div class="remark-text">
                            You need a Prelim Exam score of <strong>${requiredExcellent.toFixed(2)}</strong> 
                            to achieve an Excellent standing (100). Aim high and study well!
                        </div>
                    </div>
                `;
            }

            remarkBox.innerHTML = html;
        }

        // ========================================
        // EVENT HANDLERS: Form Submission and Reset
        // ========================================
        document.getElementById('gradeForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // Get input values
            const attendance = document.getElementById('attendance').value;
            const lw1 = document.getElementById('labWork1').value;
            const lw2 = document.getElementById('labWork2').value;
            const lw3 = document.getElementById('labWork3').value;

            // Validate inputs
            let error = validateInput(attendance, 0, 100, 'Attendance');
            if (error) { showAlert(error); return; }

            error = validateInput(lw1, 0, 100, 'Lab Work 1');
            if (error) { showAlert(error); return; }

            error = validateInput(lw2, 0, 100, 'Lab Work 2');
            if (error) { showAlert(error); return; }

            error = validateInput(lw3, 0, 100, 'Lab Work 3');
            if (error) { showAlert(error); return; }

            // Convert to numbers
            const attendanceNum = parseFloat(attendance);
            const lw1Num = parseFloat(lw1);
            const lw2Num = parseFloat(lw2);
            const lw3Num = parseFloat(lw3);

            // Perform calculations
            const labAverage = computeLabWorkAverage(lw1Num, lw2Num, lw3Num);
            const classStanding = computeClassStanding(attendanceNum, labAverage);
            const requiredPass = computeRequiredPrelimExam(PASSING_GRADE, classStanding);
            const requiredExcellent = computeRequiredPrelimExam(EXCELLENT_GRADE, classStanding);

            // Prepare data object
            const data = {
                attendance: attendanceNum,
                lw1: lw1Num,
                lw2: lw2Num,
                lw3: lw3Num,
                labAverage: labAverage,
                classStanding: classStanding,
                requiredPass: requiredPass,
                requiredExcellent: requiredExcellent
            };

            // Display results
            displayResults(data);
        });

        // Reset button handler
        document.getElementById('resetBtn').addEventListener('click', function() {
            document.getElementById('gradeForm').reset();
            document.getElementById('results').style.display = 'none';
            document.getElementById('alertBox').style.display = 'none';
        });
    </script>
</body>
</html>